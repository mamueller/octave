(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"2Lb7":function(module,e,t){"use strict";var o=t("VbXa"),n=t.n(o),s=t("sbe7"),r=t.n(s),i=t("5BCV");e.a=function(e){return function(t){var o=t.displayName||t.name,s=function(o){function RedirectWrapper(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=o.call.apply(o,[this].concat(n))||this).state={haveRedirected:!1},e}n()(RedirectWrapper,o);var s=RedirectWrapper.prototype;return s.componentWillMount=function componentWillMount(){this.conditionallyRedirect(this.props)},s.componentWillReceiveProps=function componentWillReceiveProps(e){this.conditionallyRedirect(e)},s.conditionallyRedirect=function conditionallyRedirect(t){var o=e(t),n=o.redirectUrl,s=o.shouldRedirect;!this.state.haveRedirected&&s&&(this.setState({haveRedirected:!0}),this.context.router.push(n))},s.render=function render(){var o,n;if(e(this.props).shouldRedirect)return null;return r.a.createElement(t,this.props)},RedirectWrapper}(r.a.Component);return s.displayName=o+"RedirectWrapper",s.contextTypes={router:r.a.PropTypes.object.isRequired},Object(i.default)(s,t),s}}},EuT7:function(module,exports,e){var t=e("xjVC"),o;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},s=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},GC28:function(module,e,t){"use strict";var o=t("VbXa"),n=t.n(o),s=t("sbe7"),r=t.n(s),i=t("QjkW"),a=t("CQyo"),u=t("AhVq"),c=t("KMW/"),l=t("8cuT"),p=t.n(l),d=t("GP6s"),h=t.n(d),m=t("EuT7"),f=t.n(m),y=function getLocalStorageKey(e){return"discussionSurveyDisplayed.".concat(e)},v=function(e){function DiscussionSatisfactionSurveyModal(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).state={showModal:!1,nextLocation:null,userConfirmed:!1},t.handleOpenSurvey=function(){u.a.safelyOpenUrl("https://www.surveymonkey.com/r/RJ22ZPH"),t.handleContinue()},t.handleContinue=function(){i.a.set(y(t.props.courseId),!0),t.setState({userConfirmed:!0,showModal:!1},function(){t.context.router.push(t.state.nextLocation)})},t.routerWillLeave=function(e){var o=t.props,n=o.courseId,s=o.sessionId,r=t.state,a=r.userConfirmed,u=r.nextLocation;if(a)return!0;if(e){var l=c.a.get("DiscussionsSatisfactionSurvey","showSatisfactionSurvey",{course_id:n,ondemand_session_id:s}),p=i.a.get(y(n));if(!l||u||p)return!0;return t.setState({showModal:!0,nextLocation:e}),!1}return!0},t}n()(DiscussionSatisfactionSurveyModal,e);var t=DiscussionSatisfactionSurveyModal.prototype;return t.componentDidMount=function componentDidMount(){this.context.router.setRouteLeaveHook(this.props.currentRoute,this.routerWillLeave)},t.render=function render(){var e=this.state.showModal;return r.a.createElement("div",{className:"rc-DiscussionSatisfactionSurveyModal"},e&&r.a.createElement(a.a,{allowClose:!0,handleClose:this.handleContinue,className:"DiscussionSatisfactionModal",trackingName:"discussion_satisfaction_survey",modalName:h()("Discussion Forums Satisfaction")},r.a.createElement("h4",null,h()("Please take a short survey to help us improve the discussion forums.")),r.a.createElement("div",null,r.a.createElement("button",{className:"survey-open primary",onClick:this.handleOpenSurvey},h()("Open survey in new tab"))),r.a.createElement("div",null,r.a.createElement("button",{className:"survey-continue button-link",onClick:this.handleContinue},h()("No thanks, continue to next page")))))},DiscussionSatisfactionSurveyModal}(r.a.Component);v.propTypes={currentRoute:r.a.PropTypes.object.isRequired,courseId:r.a.PropTypes.string,sessionId:r.a.PropTypes.string},v.contextTypes={router:r.a.PropTypes.object.isRequired},e.a=p()(v,["SessionStore"],function(e){var t;return{sessionId:e.SessionStore.getSessionId()}})},pZ5z:function(module,e,t){"use strict";t.r(e),t.d(e,"default",function(){return g});var o=t("VbXa"),n=t.n(o),s=t("sbe7"),r=t.n(s),i=t("VYij"),a=t.n(i),u=t("GC28"),c=t("Qr9E"),l=t("7jZ/"),p=t("L1vm"),d=t("b+bd"),h=t("2Lb7"),m=t("ngyh"),f=t.n(m),y=t("UU2Q"),v=t("GP6s"),C=t.n(v),b=function(e){function CourseHomeDiscussionsPage(){return e.apply(this,arguments)||this}var t;return n()(CourseHomeDiscussionsPage,e),CourseHomeDiscussionsPage.prototype.render=function render(){var e=this.props,t=e.courseName,o=e.route,n=e.courseId,s=C()("#{courseName} - Discussions",{courseName:t});return r.a.createElement("div",{className:"rc-CourseHomeDiscussionsPage"},r.a.createElement(u.a,{currentRoute:o,courseId:n}),r.a.createElement(c.a,{title:s}),this.props.children)},CourseHomeDiscussionsPage}(r.a.Component);b.propTypes={route:r.a.PropTypes.object.isRequired,courseId:r.a.PropTypes.string,courseName:r.a.PropTypes.string,children:r.a.PropTypes.node};var S=Object(i.compose)(p.a.createTrackedContainer(function(){return{namespace:{page:"discussions"}}}),Object(d.a)(["CourseStore","CourseMembershipStore","ApplicationStore"],function(e,t){var o=e.CourseStore,n=e.CourseMembershipStore,s=e.ApplicationStore,r=n.isEnrolled()&&!n.isPreEnrolled(),i=o.getCourseId(),a=n.hasModerationRole()||s.isSuperuser(),u=r;return{courseId:i,courseName:o.getMetadata().get("name"),courseRootPath:o.getCourseRootPath(),canAccessDiscussions:!Object(l.a)(i)&&(u||a)}}),Object(h.a)(function(e){var t,o;return{redirectUrl:e.courseRootPath,shouldRedirect:!e.canAccessDiscussions}}))(b),g=function(e){function FluxibleCourseHomeDiscussionsPage(){return e.apply(this,arguments)||this}n()(FluxibleCourseHomeDiscussionsPage,e);var t=FluxibleCourseHomeDiscussionsPage.prototype;return t.componentWillMount=function componentWillMount(){this.fluxibleContext=Object(y.a)(this.context.fluxibleContext)},t.render=function render(){return r.a.createElement(f.a,{context:this.fluxibleContext.getComponentContext()},r.a.createElement(S,this.props))},FluxibleCourseHomeDiscussionsPage}(r.a.Component);g.contextTypes={fluxibleContext:r.a.PropTypes.object}},xjVC:function(module,exports,e){}}]);
//# sourceMappingURL=63.8ec3b195f54cb1b3f167.js.map