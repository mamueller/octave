(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{"4xeL":function(module,e,r){"use strict";var t=r("KMW/");e.a=function(e){return t.a.get("DiscussionsSubscriptionsWhitelist","validCourseIds").indexOf(e)>-1}},AH1H:function(module,exports,e){},CSo3:function(module,e,r){"use strict";r.d(e,"c",function(){return i}),r.d(e,"a",function(){return s}),r.d(e,"b",function(){return a});var t=r("MVZn"),n=r.n(t),o=r("YDId"),i=function fetchSubscriptionForForum(e,r){var t=r.forumSubscriptionId,n=r.forumType;return o.a(t,n).then(function(r){e.dispatch("UPDATE_SUBSCRIPTION",r)}).fail(function(r){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",r)})},s=function addSubscription(e,r){var t=r.forumSubscriptionId,n=r.forumType;return e.dispatch("UPDATE_SUBSCRIPTION",{id:t,isInProgress:!0}),o.b(t,n).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:t,isSubscribed:!0})}).fail(function(r){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",r)})},a=function deleteSubscription(e,r){var t=r.subscription,i=r.forumSubscriptionId,s=r.forumType;return e.dispatch("UPDATE_SUBSCRIPTION",n()({},t,{isInProgress:!0})),o.c(i,s).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:i,isSubscribed:!1})}).fail(function(r){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",r)})}},Ek0i:function(module,e,r){"use strict";var t=r("VbXa"),n=r.n(t),o=r("w/1P"),i=r.n(o),s=r("CsdX"),a=r("sbe7"),u=r.n(a),c=r("eJMc"),p=r.n(c),l=r("VYij"),m=r.n(l),d=r("cIEV"),b=r.n(d),f=function emptyFunction(){},S=function(e){function Breadcrumbs(){return e.apply(this,arguments)||this}n()(Breadcrumbs,e);var r=Breadcrumbs.prototype;return r.getFilteredLinks=function getFilteredLinks(){var e;return this.props.links.slice().filter(l.identity)},r.render=function render(){var e=this.props,r=e.className,t=e.linkClassName,n=e.separator,o=e.separatorStyles,a=this.getFilteredLinks();return u.a.createElement("ol",{className:i()("rc-Breadcrumbs inline",r)},a.map(function(e,r){var i=[u.a.createElement("li",null,e.href?u.a.createElement(p.a,{className:t,to:e.href,onClick:e.onClick||f},e.label):u.a.createElement("span",{className:t},e.label))];return r!==a.length-1&&i.push(u.a.createElement("li",Object(s.d)("divider",o),n||"/")),i}))},Breadcrumbs}(u.a.Component);e.a=S},JcY5:function(module,exports,e){},OVKh:function(module,e,r){"use strict";var t=r("VbXa"),n=r.n(t),o=r("VYij"),i=r.n(o),s=r("sbe7"),a=r.n(s),u=r("sQ/U"),c=r("CSo3"),p=r("KRcl"),l=r("y1LI"),m=r("8cuT"),d=r.n(m),b=r("4xeL"),f=r("GP6s"),S=r.n(f),h=r("UaPE"),y=r.n(h),T=function(e){function SubscriptionButton(r,t){var n;return(n=e.call(this,r,t)||this).toggleSubscription=function(){var e=n.props,r=e.isSubscribed,t=e.forumType,o=e.subscription,i=e.forumSubscriptionId;r?(n.context.executeAction(c.b,{subscription:o,forumSubscriptionId:i,forumType:t}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:S()("You will no longer receive emails whenever new threads are added.")})):(n.context.executeAction(c.a,{forumType:t,forumSubscriptionId:i}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:S()("You will receive emails whenever new threads are added.")}))},n.state={canModerateGroup:!1,subscriptionDetails:null,showSubscriptionDetails:!1},n}n()(SubscriptionButton,e);var r=SubscriptionButton.prototype;return r.componentDidMount=function componentDidMount(){var e=this,r=this.props,t=r.groupId,n=r.subscription,o=r.forumSubscriptionId,i=r.forumType,s=u.a.isSuperuser(),a=u.a.isAuthenticatedUser();n||this.context.executeAction(c.c,{forumType:i,forumSubscriptionId:o}),t&&Object(p.a)(t,a,s).then(function(r){return e.setState({canModerateGroup:r})})},r.componentDidUpdate=function componentDidUpdate(){var e=this.props,r=e.subscription,t=e.forumSubscriptionId,n=e.forumType;r||this.context.executeAction(c.c,{forumType:n,forumSubscriptionId:t})},r.render=function render(){var e=this.props,r=e.subscription,t=e.isSubscribed,n=e.hasError,o=e.courseId,i=e.hasModerationRole,s=e.isSubscriptionInProgress,u=this.state,c=u.canModerateGroup,p=u.showSubscriptionDetails,m=u.subscriptionDetails;if(!Object(b.a)(o)&&!i&&!c)return null;return a.a.createElement("div",{className:"rc-SubscriptionButton horizontal-box vertical-when-mobile align-items-vertical-center"},a.a.createElement("button",{className:"passive",onClick:this.toggleSubscription,disabled:!r},(!r||s)&&a.a.createElement(l.a,{name:"spinner",className:"cif-spin"}),!!r&&!s&&(t?S()("Unsubscribe"):S()("Subscribe"))),!n&&p&&a.a.createElement("div",{className:"message caption-text"},m),n&&a.a.createElement("div",{className:"errorMessage"},S()("Sorry, something went wrong. Try again.")))},SubscriptionButton}(a.a.Component);T.propTypes={hasModerationRole:a.a.PropTypes.bool,hasError:a.a.PropTypes.bool,courseId:a.a.PropTypes.string,forumSubscriptionId:a.a.PropTypes.string,subscription:a.a.PropTypes.object,forumType:a.a.PropTypes.string,groupId:a.a.PropTypes.string,isSubscribed:a.a.PropTypes.bool,isSubscriptionInProgress:a.a.PropTypes.bool},T.contextTypes={executeAction:a.a.PropTypes.func.isRequired},e.a=i.a.compose(d()(["SubscriptionStore","CourseMembershipStore","CourseStore"],function(e,r){var t=e.SubscriptionStore,n=e.CourseMembershipStore,o=e.CourseStore,i=r.forumId,s=i&&i.split("~"),a=i&&"".concat(u.a.get().id,"~").concat(s[0],"~").concat(s[1]);return{forumSubscriptionId:a,courseId:o.getCourseId(),hasModerationRole:n.hasModerationRole()||u.a.isSuperuser(),hasError:t.hasError(),subscription:t.getSubscription(a),isSubscribed:t.getIsSubscribed(a),isSubscriptionInProgress:t.getIsSubscriptionInProgress(a)}}))(T)},Odd0:function(module,exports,e){},U7Mi:function(module,exports,e){},UaPE:function(module,exports,e){var r=e("Odd0"),t;"string"==typeof r&&(r=[[module.i,r,""]]);var n={transform:void 0},o=e("aET+")(r,n);r.locals&&(module.exports=r.locals)},Ub7k:function(module,exports,e){var r=e("JcY5"),t;"string"==typeof r&&(r=[[module.i,r,""]]);var n={transform:void 0},o=e("aET+")(r,n);r.locals&&(module.exports=r.locals)},YDId:function(module,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"b",function(){return o}),r.d(e,"c",function(){return i});var t=r("obES"),n=function getForumSubscription(e,r){return t.a.getSubscription(e,r).then(function(e){return Object.assign(e.elements[0],{isSubscribed:!0})}).catch(function(r){if(404===r.status)return{id:e,isSubscribed:!1};throw r})},o=function subscribeUserToEntity(e,r){return t.a.subscribe(e,r)},i=function unsubscribeUserFromEntity(e,r){return t.a.unsubscribe(e,r)}},arLX:function(module,e,r){"use strict";var t=r("MVZn"),n=r.n(t),o=r("SaLm");e.a=function(e){if(!e.currentForum)return e;var r=e.courseForums.concat(e.mentorForums).concat(e.groupForums),t=r.find(function(e){return e.forumType.typeName===o.j.rootForumType}),i=e.currentForum;e.currentForum.parentForumId&&e.currentForum.parentForumId!==t.id&&(i=r.find(function(r){return r.id===e.currentForum.parentForumId}));var s=r.filter(function(e){return e.parentForumId===i.id});return s.unshift(i),n()({},e,{listedForums:s,parentForumId:i.id})}},cIEV:function(module,exports,e){var r=e("U7Mi"),t;"string"==typeof r&&(r=[[module.i,r,""]]);var n={transform:void 0},o=e("aET+")(r,n);r.locals&&(module.exports=r.locals)},jYk1:function(module,e,r){"use strict";var t=r("VbXa"),n=r.n(t),o=r("sbe7"),i=r.n(o),s=r("VYij"),a=r.n(s),u=r("w/1P"),c=r.n(u),p=r("eJMc"),l=r.n(p),m=r("Akn8"),d=r("BZ+2"),b=r("zFZo"),f=r("weTL"),S=r("+LJP"),h=r("pqXt"),y=r("VXRf"),T=r("hN99"),v=r("arLX"),I=r("oQ9N"),g=r("GP6s"),E=r.n(g),F=r("vJ/u"),P=r.n(F),O=function(e){function SubforumSidebar(){return e.apply(this,arguments)||this}var r;return n()(SubforumSidebar,e),SubforumSidebar.prototype.render=function render(){var e=this.props,r=e.listedForums,t=e.currentForumId,n=e.parentForumId,o=e.courseSlug;if(!r||r.length<=1)return null;return i.a.createElement("div",{className:"rc-SubforumSidebar card-rich-interaction flex-1"},i.a.createElement("h2",{className:"subforums-list-title headline-1-text color-secondary-text"},E()("Subforums")),i.a.createElement("ul",{className:"nostyle"},r.map(function(e){var r=c()("forum-title",{"body-2-text":e.id===t,"body-1-text":e.id!==t}),s=m.a.join(Object(T.e)(o),e.link);return i.a.createElement(l.a,{key:e.id,to:s,className:"nostyle"},i.a.createElement("li",{className:"subforum-entry"},e.id===t&&i.a.createElement("div",{className:"current-forum-indicator"}),i.a.createElement("div",{className:r},e.id===n?E()("All"):e.title)))})))},SubforumSidebar}(i.a.Component);O.propTypes={courseSlug:i.a.PropTypes.string,listedForums:i.a.PropTypes.arrayOf(i.a.PropTypes.oneOfType([i.a.PropTypes.instanceOf(d.a),i.a.PropTypes.instanceOf(b.a),i.a.PropTypes.instanceOf(f.a)])),currentForumId:i.a.PropTypes.string,parentForumId:i.a.PropTypes.string},e.a=a.a.compose(Object(I.a)({fields:["link","title","description","parentForumId"]}),Object(S.a)(h.a),Object(y.a)(v.a))(O)},obES:function(module,e,r){"use strict";var t=r("wiyT"),n=r.n(t),o=r("CWYE"),i=r("SaLm"),s=Object(o.a)("/api/onDemandCourseForumSubscriptions.v1",{type:"rest"}),a=Object(o.a)("/api/onDemandMentorForumSubscriptions.v1",{type:"rest"}),u=Object(o.a)("/api/groupForumSubscriptions.v1",{type:"rest"}),c=function getSubscription(e,r){return r===i.j.mentorForumType?n()(a.get(e)):r===i.j.groupForumType?n()(u.get(e)):n()(s.get(e))},p=function subscribe(e,r){return r===i.j.mentorForumType?n()(a.put(e)):r===i.j.groupForumType?n()(u.put(e)):n()(s.put(e))},l=function unsubscribe(e,r){return r===i.j.mentorForumType?n()(a.delete(e)):r===i.j.groupForumType?n()(u.delete(e)):n()(s.delete(e))};e.a={getSubscription:c,subscribe:p,unsubscribe:l}},"vJ/u":function(module,exports,e){var r=e("AH1H"),t;"string"==typeof r&&(r=[[module.i,r,""]]);var n={transform:void 0},o=e("aET+")(r,n);r.locals&&(module.exports=r.locals)},vkTq:function(module,e,r){"use strict";r.r(e);var t=r("VbXa"),n=r.n(t),o=r("sbe7"),i=r.n(o),s=r("VYij"),a=r.n(s),u=r("Akn8"),c=r("oVXz"),p=r("hN99"),l=r("JUgE"),m=r("Ek0i"),d=r("OVKh"),b=r("STl7"),f=r("jYk1"),S=r("UVOs"),h=r("5VK0"),y=r("FfoE"),T=r("pqXt"),v=r("arLX"),I=r("SaLm"),g=r("oQ9N"),E=r("BZ+2"),F=r("zFZo"),P=r("weTL"),O=r("VXRf"),N=r("+LJP"),x=r("GP6s"),j=r.n(x),w=r("Ub7k"),k=r.n(w),U=function(e){function ThreadsView(){return e.apply(this,arguments)||this}n()(ThreadsView,e);var r=ThreadsView.prototype;return r.renderSubscriptionButton=function renderSubscriptionButton(){var e=this.props.currentForum;if(!e||e.forumType.typeName===I.j.itemForumType)return null;return i.a.createElement("div",{className:"flex-1"},i.a.createElement(d.a,{forumId:this.props.currentForum&&this.props.currentForum.id,forumType:this.props.currentForum&&this.props.currentForum.forumType.typeName,groupId:this.props.currentForum&&this.props.currentForum.forumType.definition.groupId}))},r.render=function render(){var e=this.props.currentForum;if(!e)return i.a.createElement("div",{className:"forum-name headline-5-text color-primary-text"},j()("Oops! Looks like this thread isn't viewable or does not exist."));var r=e.parentForumId&&this.props.listedForums.find(function(r){return e.parentForumId===r.id}),t=e.title,n=e.description,o=e.id,s=u.a.join(Object(p.e)(this.props.courseSlug),e.link),a=[{label:j()("Discussion Forums"),href:Object(p.d)()},r?{label:r.title,href:u.a.join(Object(p.e)(this.props.courseSlug),r.link)}:void 0],d=!!this.context.router.params.question_id;return i.a.createElement("div",{className:"rc-ThreadsView"},i.a.createElement("div",{className:"horizontal-box vertical-when-tablet"},i.a.createElement("div",{className:"flex-2 threads-view-header"},i.a.createElement(m.a,{className:"breadcrumbs",links:a}),i.a.createElement("div",null,i.a.createElement("div",{className:"forum-name headline-5-text color-primary-text"},t),!d&&i.a.createElement("div",{className:"forum-description horizontal-box align-items-vertical-center vertical-when-mobile"},i.a.createElement(l.a,{className:"body-1-text",cml:n}),i.a.createElement("div",null,this.renderSubscriptionButton())))),i.a.createElement("div",{className:"flex-1 align-self-end session-switcher-container"},i.a.createElement(b.a,null))),i.a.createElement("div",{className:"horizontal-box align-items-top vertical-when-tablet"},i.a.createElement(c.a,{className:"flex-2 discussions-body-column",key:o,backLink:s}),i.a.createElement(f.a,null)))},ThreadsView}(i.a.Component);U.propTypes={currentForum:i.a.PropTypes.oneOfType([i.a.PropTypes.instanceOf(E.a),i.a.PropTypes.instanceOf(F.a),i.a.PropTypes.instanceOf(P.a)]),listedForums:i.a.PropTypes.arrayOf(i.a.PropTypes.oneOfType([i.a.PropTypes.instanceOf(E.a),i.a.PropTypes.instanceOf(F.a),i.a.PropTypes.instanceOf(P.a)])),courseSlug:i.a.PropTypes.string},U.contextTypes={router:i.a.PropTypes.object.isRequired},e.default=Object(s.compose)(Object(g.a)({fields:["title","description","link"],subcomponents:[f.a,S.a,h.a,y.a]}),Object(N.a)(T.a),Object(O.a)(v.a))(U)}}]);
//# sourceMappingURL=64.4b619234d6f7a0d1dc3d.js.map